## Host parameters

## Discovery rules
# Discover services on host
UserParameter=machine.discover.services,/etc/zabbix/external_scripts/machine_discover_services.sh

## Items
# Process restart check
UserParameter=check.process.restart[*],/etc/zabbix/external_scripts/process_restart.sh $1
# Physical network card status
UserParameter=get.nic.status[*],cat /sys/class/net/$1/carrier
# Running process check
UserParameter=get.pid[*],pgrep -f "$1" | grep -v $$$$
# Ceph storage stats
UserParameter=check.ceph.storage.stats[*],/etc/zabbix/external_scripts/ceph_storage_stats.sh $1
# Machine uptime service check
UserParameter=machine.uptime.service[*],/etc/zabbix/external_scripts/machine_uptime_service.sh $1


## LXD parameters

## Discovery rules
# Discover running containers on host
UserParameter=lxd.container.discovery,/etc/zabbix/external_scripts/lxd_discover_containers.sh
# Discover services inside containers:
UserParameter=lxd.container.services.discovery[*],/etc/zabbix/external_scripts/lxd_discover_services.sh $1

## Items
#LXD Systemd service status check
UserParameter=lxd.container.status.service[*],/etc/zabbix/external_scripts/lxd_status_service.sh $1 $2
#LXD Systemd service uptime check
UserParameter=lxd.container.uptime.service[*],/etc/zabbix/external_scripts/lxd_uptime_service.sh $1 $2
# Ceph cluster health status
UserParameter=ceph.cluster.health.status,/etc/zabbix/external_scripts/ceph_cluster_health_status.sh 